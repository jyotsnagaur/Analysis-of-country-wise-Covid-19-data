---
title: "FinalAssignment"
author: "JYOTSNA"
date: "2022-10-18"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Part A - Data Science Questions (12 marks)


<b>Q1. From your understanding of ethical data science, mention three principles of a code of ethics that any data scientist should consider.</b>

P1:As a data scientist, we should firstly produce truthful results to the public/stakeholders. We must abstain from producing false projections or 'truthful falsehood'.Truthful falsehood is projecting data in a misleading manner which shows a misleading trend to the people.

P2:It is important to respect the privacy of the people/stakeholders and seek their consent before collecting or using their data for any kind of analysis.

P3:It is important to remember that we remain a member of the society and it is important to work in a manner that is progressive for the society at large. As a data scientist we must be careful to not publish sensitive data and have no intentions of causing harm to public health and safety.




<b>Q2.To build a visualisation using the ggplot2 library, we use the following template:</b>

ggplot(data= [dataset], mapping = aes(x = [x-variable], y = [y-variable]))+
geom_xxx() +
other options 
Based on the above template, mention the main components of building a graph using ggplot2 and describe the meaning of each of these components.


There are 3 main components here:

a) the dataset which needs to be displayed. It has to be contained in a data frame/tibble and has to include the x-variable which comes on the x-axis and which is the independent/explanatory variable. It has to also include the y-variable which is the dependent/response variable which changes as x changes and is plotted on the y-axis

b) aesthetics, introduced by the function aes() that takes care of positioning/mapping the variables on the plot.It also includes other elements like color where we can specify if the plot needs to be colored as per a specific group or a specific color. It can include specification for alpha which shows the transparency of plot. It can also contain specification for linetype, size,shape,etc.

c) geometry, introduced by the function geom() that takes care of drawing the graph (bar graph, line, scatter plot, etc). There can be different geometries like horizontal,vertical,diagonal lines, barplot,contour,density plots,point,boxplot,jitter,polygon etc.All of these geometries can be plotted using their respective codes starting with geom_.




<b>Q3.Describe three properties of the correlation coefficient of two variables</b>


1.  The Magnitude of the correlation coefficient(R) represents the strength of the relationship. It ranges between -1 and +1.

2.  Direction of the relationship: This is indicated by the sign of the correlation coefficient. A positive R represents an increasing trend in the graph where the y-variable increases with increase in x-variable. A negative R represents a decreasing trend where y-variable decreases with increase in x-variable.

3.  The correlation coefficient is unit-less. The value will stay very similar even with scaling or normalising any of the variables. The correlation coefficient between x and y is same as the correlation coefficient between y and x. 




<b>Q4.Imagine we have a dataset that lists the heights of the fathers and their sons. You have built a linear model that encodes the relationship between the fathers’ heights and the sons’ heights as follows:</b>

lm(son ~ father, data = heights_data)

Call:
lm(formula = son ~ father, data = heights_data)

Coefficients:
(Intercept)    father  
70.45       0.50  
The estimated coefficient (i.e. intercept and slope), which describes the relationship between the fathers’ and sons’ heights can be interpreted as:


a) The intercept is the minimum or maximum value that can be achieved when the explanatory variable equals 0. Here the explanatory variable is the father's height and the response variable is the son's height. The intercept 70.45 units here can be interpreted as the constant difference that the father's and son's height will have, apart from their linear relationship. At any given father's height, the son's height is bound to be atleast 70.45 units more than the height of the father. In simple words, all sons in the dataset are taller than their father.

b) The slope quantifies the effect of explanatory variable(father's height) on the response variable(son's height). Here the slope measures: for each unit increase in the father's height, how much would the height of the son would increase. Here since the slope is 0.5, it means that for each 2 units increase in the height of the father, the height of the son increases by 1 unit.


# --------------------------------------------------------------------------------- #

# Part B: Data Preparation, exploring and modelling (78 marks)

Introduction:




Assumptions:





Data Description:
The four CSV files are described in the following table:
-Covid19.csv: Master file which includes information on continents,countries, and the daily new cases and the daily new deaths in each country
-Tests.csv:information about daily covid19 tests in each country
-Countries.csv:information about the countries
-Recovered.csv:information about the daily recovered cases in each country

## Task 1: Data Preparation and Wrangling: (21 marks)

### 1.Load and read the data from the CSV files and store them into dataframes named appropriately.


```{r}
library(tidyverse)


master_data <- read_csv("C:/joy_R/IDS_Finalexam/data/Covid19.csv")
head(master_data)
tests_info <- read_csv("C:/joy_R/IDS_Finalexam/data/Tests.csv")
head(tests_info)
country_info <- read_csv("C:/joy_R/IDS_Finalexam/data/Countries.csv")
head(country_info)
recov_info <- read_csv("C:/joy_R/IDS_Finalexam/data/Recovered.csv")
head(recov_info)
```

```{r}
str(master_data)
```


```{r}
str(tests_info)
```


```{r}
str(country_info)
```

```{r}
str(recov_info)
```


### 2.Tidy up the dataframe driven from the file “Recovered.csv” to be compatible with the dataframe driven from the file “Covid19.csv”, i.e., every observation should have a record of recovered patients in one country in a single day.

```{r}
new_recov <- t(recov_info)
head(new_recov)
```


```{r}
class(new_recov)
```

```{r}
new_recov2 <- as.data.frame(new_recov)
new_recov2
```


```{r}
colnames(new_recov2) <- c(new_recov2[1, ]) # assigning new column headers to each data frame in the list
new_recov2
new_recov3 <- new_recov2[-c(1), ]
new_recov3
new_recov3$date <- row.names(new_recov3)

new_recov3
```

```{r}
new_recov4 <- pivot_longer(new_recov3,
  cols = 1:185, names_to = "location",
  values_to = "cases"
)
new_recov4
```


```{r}
recov_5 <- new_recov4 %>%
  group_by(location) %>%
  arrange(location)
recov_5
```

```{r}
recov_6 <- recov_5 %>% select(location, everything())
recov_6
recov_6$date <- as.Date(recov_6$date, format = "%Y.%m.%d")
recov_6
```


### 3. Change the column names in the dataframes were loaded from the following files accordingly.
covid19.csv-Code,Country,Continent,Date,NewCases,NewDeaths
Tests.csv-Code, Date, NewTests
Countries.csv-Code,Country,Population,GDP,GDPCapita
Recovered.csv-Country,Date,Recovered

```{r}

colnames(master_data) <- c("Code", "Country", "Continent", "Date", "NewCases", "NewDeaths")
colnames(tests_info) <- c("Code", "Date", "NewTests")
colnames(country_info) <- c("Code", "Country", "Population", "GDP", "GDPCapita")
colnames(recov_6) <- c("Country", "Date", "Recovered")

head(master_data)
head(tests_info)
head(country_info)
head(recov_6)
```
### 4. Ensure that all dates variables are of date data type and with the same format across the dataframes.
```{r}
class(master_data$Date)
class(tests_info$Date)
class(recov_6$Date) # date variable changed to Date type in question-2 above.
# country_info data tibble doesnot have a Date variable. Rest in all data tibbles, the date variable is of Date type.
```

### 5. Considering the master dataframe is the one loaded from the “Covid19.csv” file, add new 5 variables to it from the other files (Recovered.csv, Tests.csv, Countries.csv). The 5 new added variables should be named (“Recovered”, “NewTests”, “Population”, “GDP”, “GDPCapita”) accordingly.

```{r}
# merging Recovered variable from the recov_6 dataframe. It has to be merged by using Date and Country column
m1 <- merge(x = master_data, y = recov_6, all.x = TRUE, by = c("Date", "Country"))
m1 <- m1 %>%
  group_by(Country) %>%
  arrange(Country)
m1
```

```{r}
# merging NewTests variable from the tests_info dataframe. It has to be merged by using Date and Code column
m2 <- merge(x = m1, y = tests_info, all.x = TRUE, by = c("Date", "Code"))
m2 <- m2 %>%
  group_by(Country) %>%
  arrange(Country)
m2
```

```{r}
# merging Population,GDP,GDPCapita variable from the country_info dataframe. It has to be merged by using Country and Code column
master_df <- merge(x = m2, y = country_info, all.x = TRUE, by = c("Country", "Code"))
master_df <- master_df %>%
  group_by(Country) %>%
  arrange(Country)
master_df
```

### 6.Check for NAs in all dataframes and change them to Zero
```{r}

```
